<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_transform_map">
    <sys_transform_map action="INSERT_OR_UPDATE">
        <active>true</active>
        <copy_empty_fields>false</copy_empty_fields>
        <create_new_record_on_empty_coalesce_fields>false</create_new_record_on_empty_coalesce_fields>
        <enforce_mandatory_fields>No</enforce_mandatory_fields>
        <name>Cisco Hyperflex TM</name>
        <order>100</order>
        <run_business_rules>false</run_business_rules>
        <run_script>true</run_script>
        <script><![CDATA[(function transformRow(source, target, map, log, isUpdate) {
	
	try{
		var snLogger  = new Cisco_SNLogger();
		var appUtil = new Cisco_AppUtil();
		
		if(source.summary){
			
			var parsedjsonData = appUtil.parse(source.summary);
			var name = source.clustername;
			var storageused = parsedjsonData.UsedCapacity;
			storageused=parseInt( storageused);
			var totalCapacity = parsedjsonData.TotalCapacity;
			totalCapacity = parseInt( totalCapacity);
			var StorageUtilization = (totalCapacity == 0)?totalCapacity:( storageused * 100 ) / totalCapacity;
			var StorageUtilizationpercentage =  String(StorageUtilization).slice(0, 3) + '%';
			var StorageOptimization = String(parsedjsonData.TotalSavings).slice(0, 4) + '%';
			
			var StorageCapacity = parseInt(parsedjsonData.TotalCapacity)/(1024*1024*1024*1024);
			StorageCapacity = Math.round(StorageCapacity * 10) / 10;
			var Uptime = parsedjsonData.Uptime;
			target.uptime = Uptime;
			target.storage_capacity = StorageCapacity;
			target.storage_utilization = StorageUtilizationpercentage;
			target.optimization = StorageOptimization;
			target.name = name;
			if(source.tags){
				var tags = appUtil.parse( source.tags);
				
				for(var i in tags){
					var tag = tags[i];
					
					target.tags[tag.Key+''] = tag.Value+'';
				}
			}	
		}
		//target.install_status=1;
		target.operational_status=1;
	}catch(e){
		snLogger.error('Exception in Cisco Hyperflex TM ' + e);
	}
	
})(source, target, map, log, action==="update");]]></script>
        <source_table>x_caci_cisco_inter_cisco_hx_dump</source_table>
        <sys_class_name>sys_transform_map</sys_class_name>
        <sys_created_by>Prince Arora</sys_created_by>
        <sys_created_on>2019-02-20 12:21:26</sys_created_on>
        <sys_id>ce49ffe0dbff2300b6237a6139961987</sys_id>
        <sys_mod_count>25</sys_mod_count>
        <sys_name>Cisco Hyperflex TM</sys_name>
        <sys_package display_value="Cisco Intersight ITSM Plugin" source="x_caci_cisco_inter">baef2ff5db132300d7b59235ca9619e3</sys_package>
        <sys_policy/>
        <sys_scope display_value="Cisco Intersight ITSM Plugin">baef2ff5db132300d7b59235ca9619e3</sys_scope>
        <sys_update_name>sys_transform_map_ce49ffe0dbff2300b6237a6139961987</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2019-07-04 07:19:26</sys_updated_on>
        <target_table>x_caci_cisco_inter_cisco_hyperflex_clusters</target_table>
    </sys_transform_map>
</record_update>
